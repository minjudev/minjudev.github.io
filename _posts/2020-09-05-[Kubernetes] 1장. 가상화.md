## 1.1 가상화 개요
### 1) 가상화 배경
2000년대에 이르러 하드웨어 기술의 성장과 보급 증가로 인해 성능이 우수한 하드웨어를 구하기 쉬워졌다.   
이로 인해 시스템의 리소스 활용률이 낮아졌고, 활용하지 않는 자원을 사용하려는 기술들이 개발돼 현재의 가상화가 등장하게 되었다.

### 2) 가상화 종류
현재 대부분의 클라우드 서비스들은 다음과 같은 가상화 기술을 사용하고 있다.  
(1) 서버 가상화
- 가장 일반적인 가상화 기술
- 서버를 가상의 머신으로 만들어 사용
- 리소스 활용률을 높이고자 CPU나 메모리 등을 논리적으로 나누어 사용

(2) 네트워크 가상화
- 하드웨어 어플라이언스 형태로 존재했던 L2, L3, L7 스위치와 네트워크 방화벽, 보안 장비들을 가상 머신으로 구현
- 하나로 통합된 여러 개의 물리적 환경의 장치들을 다시 가상으로 쪼개서 나누어 사용 가능
- 네트워크를 더욱 유연하고 빠르게 제공
- 대표적인 네트워크 가상화 기술
  - NFV(Network Function Virtualization)
    - 전용 하드웨어 기반에서 동작하는 네트워크 기능을 범용 x86 서버 기반에서 수행
    - 스위치나 라우터 등의 물리적 네트워크 장비 기능을 가상화하여 가상머신(VM)이나 컨테이너(Container), 또는 범용 프로세서를 탑재한 하드웨어에서 구동하는 방식
    - 모든 하드웨어 자원들은 가상화를 통해 각각의 장비가 아닌 하나의 소프트웨어 풀(Pool)로 묶여 필요한 만큼만 필요한 곳에 논리적으로 배치됨
  - SDN(Software Defined Network)  
  ![image](https://user-images.githubusercontent.com/53208493/92306191-1ef39900-efc8-11ea-8087-817be08b13a5.png)
    - 네트워크 장비의 패킷 전달 기능에서 제어 부분을 물리적으로 분리하는 기술
    - 떼어낸 제어 부분을 하나의 컨트롤러로 집중하고 이러한 컨트롤러가 제어 부분이 빠지고 전송 기능만이 남은 여러 장비들을 한번에 컨트롤
    - 이를 통해 IT 관리자는 I/O, 네트워크 카드, 스위치, 라우터 등 모든 네트워크 환경을 한 화면에서 통합적으로 관리할 수 있게 됨. 
    - SDN은 네트워크 제어 계층을 데이터 계층에서 분리함으로써 하드웨어를 기반으로 발전해온 네트워크를 소프트웨어 중심의 기술로 전환시키는 역할을 하고 있음 
    
[참고 사이트 - 네트워크 가상화: NFV & SDN](https://m.blog.naver.com/shakey7/221848950760)

(3) 스토리지 가상화
- 여러 개의 물리적인 드라이브를 하나의 논리적인 드라이브처럼 사용하는 기술
- 이 기술을 사용하면 디스크를 효율적으로 사용할 수 있으며 확장도 용이해짐
- 대표적인 스토리지 가상화 기술
  - SDS(Software Defined Storage)
    - 서버 및 네트워크 가상화처럼 스토리지의 관리 및 프로비저닝을 기반 물리적 하드웨어와 분리하는 스토리지 데이터 센터 아키텍처
    - 정적이고 비효율적인 하드웨어를 민첩하고 자동화된 동적 솔루션으로 대체
    - 소프트웨어 정의 스토리지를 사용하면 필요한 용량과 성능, 보호 수준을 조합하여 과도하거나 부족함 없이 정확하게 애플리케이션을 동적으로 프로비저닝 가능

(4) 컨테이너 가상화  
![스크린샷, 2020-09-05 23-07-54 (1)](https://user-images.githubusercontent.com/53208493/92307978-21a8bb00-efd5-11ea-9f35-6bcee202b596.png)  
[이미지 출처](https://m.blog.naver.com/PostView.nhn?blogId=complusblog&logNo=220980996544&proxyReferer=https:%2F%2Fwww.google.com%2F)  
- 호스트 운영체제에서 논리적인 구역을 만들어 서로 독립적인 애플리케이션을 실행하는 기술
- 이 논리적인 구역을 컨테이너라 하며, 컨테이너에는 애플리케이션과 애플리케이션이 수행할 때 필요로 하는 라이브러리를 추가할 수 있음
- 서버 가상화보다 리소스를 효율적으로 사용할 수 있으며, 애플리케이션의 빠른 배포 가능

## 1.2 서버 가상화
### 1) 서버 가상화 개요  
![스크린샷, 2020-09-06 00-05-20](https://user-images.githubusercontent.com/53208493/92307948-d55d7b00-efd4-11ea-83c4-c86822f94ad1.png)  
서버 가상화는 가상머신을 생성할 때 사용하는 기술이다.   
가상머신을 생성하기 위해서는 시스템 자원을 나누어주는 파티셔닝 기술이 필요한데, 이러한 파티셔닝을 가능하게 해주는 소프트웨어를 하이퍼바이저라고 한다.  

### 2) 하이퍼바이저
하이퍼바이저는 호스트가 소프트웨어 파티셔닝이 가능하게 만들어주는 소프트웨어이다.   
하이퍼바이저는 크게 두 가지의 역할을 한다.  
첫번째, 가상머신의 리소스 관리이다. 가상머신이 어느 정도의 가상 리소스를 할당 받을지에 대해 정하며 실제 물리적인 자원을 사용할 수 있도록 한다.  
두번째, 리소스간 접근 방지 기능이다. 가상머신이 서로 접근할 수 있게 되면 보안상 큰 문제가 발생할 수 있으므로 리소스간 접근 방지는 매우 중요한 부분이다.   
하이퍼바이저의 대표적인 예시는 VMWare, Xen, VirtualBox, KVM이 있다.  

## 1.3 리눅스 컨테이너
### 1) 리눅스 컨테이너 개요
리눅스 컨테이너는 컨테이너 가상화 기술을 사용한다.   
컨테이너에는 애플리케이션과 애플리케이션이 수행할 때 필요로 하는 라이브러리 및 설정파일 등이 포함되어 있다.  
리눅스 컨테이너는 가상머신과 비교하면 좀 더 쉽게 이해할 수 있다. 컨테이너는 가상머신과 다르게 가상화 계층이 없고 커널이 별로돌 존재하지 않으므로 가상머신에 비해 가볍고 실행 속도도 빠르다.  
도커는 이러한 컨테이너를 다루는 도구이며, 컨테이너 런타임이라고도 한다.  

### 2) 사용하는 기술
리눅스 컨테이너를 사욯할 때의 핵심 기술 두 가지는 cgroup과 namespace이다.  

(1) cgroup  
cgroup은 control group의 약자로, 프로세스 또는 쓰레드를 그룹화하여 관리하는 기능과 시스템 리소스(CPU, 메모리 등)의 사용을 제한하는 기술이다.
리눅스 컨테이너는 호스트의 리소스를 공유하며 사용하는데 이 때 cgroup은 각 컨테이너가 사용하는 리소스의 양을 제한하고, 각 컨테이너가 다른 컨테이너에 영향을 주지 않게 막아주는 역할을 하고 있다.  

(2) namespace
namespace라는 공간에는 다수의 오브젝트를 격리할 수 있다.   
예를 들어, 원래는 동일한 호스트에서 동일한 PID를 가질 수 없지만, 서로 다른 namespace에서는 동일한 PID를 가질 수 있다.  
namespace의 종류는 다음과 같다.  
|이름|설명|
|:---:|:---:|
|PID namespace|namespace에서 독립적인 PID 사용|
|Network namespace|namespace에서 독립적인 네트워크 사용|
|UID namespace|namespace에서 독립적인 UID 사용|
|Mount namespace|namespace에서 독립적인 Mount Point 사용|
|UTS namespace|namespace에서 독립적인 호스트네임 사용|
|IPC namespace|namespace에서 독립적인 IPC 사용|
> IPC(Inter-Process Communication)  
> IPC는 영문 약자 그대로 "프로세스 간 통신"이라는 뜻이며, 프로세스 사이의 데이터 통신은 IPC를 통해서 가능하다.  
  프로세스는 IPC를 통하여 다른 프로세스에게 데이터를 송신하거나, 다른 프로세스로부터 데이터를 수신할 수 있고, 커널은 이 프로세스 통신을 위해 다양한 IPC 매커니즘을 제공한다.   

[참고 사이트 - IPC란?](http://blog.naver.com/PostView.nhn?blogId=green187&logNo=110130416319)
